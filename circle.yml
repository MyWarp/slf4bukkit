machine:
  java:
    version: oraclejdk7

dependencies:
  pre:
    - wget https://archive.apache.org/dist/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.tar.gz
    - sudo tar -zxf apache-maven-3.3.9-bin.tar.gz -C /usr/local/
    - rm apache-maven-3.3.9-bin.tar.gz
    - sudo ln -s /usr/local/apache-maven-3.3.9/bin/mvn /usr/bin/mvn
  override:
    - mvn -V -DskipTests clean install dependency:resolve-plugins dependency:go-offline

test:
  override:
    - exit # We don't have any tests right now.

deployment:
  production:
    branch: production # TBD
    commands:
      - mvn -Drtr.disabled=true clean
      - mvn -s settings.xml -Drtr.release=true
