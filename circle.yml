machine:
  java:
    version: oraclejdk7
  environment:
    PATH: "~/maven/bin:${PATH}"

dependencies:
  pre:
    - wget https://archive.apache.org/dist/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.tar.gz
    - tar -xvzf apache-maven-3.3.9-bin.tar.gz
    - rm apache-maven-3.3.9-bin.tar.gz
    - mv apache-maven-3.3.9 maven
  override:
    - mvn -V -DskipTests clean install dependency:resolve-plugins dependency:go-offline

test:
  override:
    - exit # We don't have any tests right now.

deployment:
  production:
    branch: production # TBD
    commands:
      - mvn -Drtr.disabled=true clean
      - mvn -s settings.xml -Drtr.release=true
